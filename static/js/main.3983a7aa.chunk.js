(this["webpackJsonpnote-project"]=this["webpackJsonpnote-project"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},128:function(e,t,n){},238:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(8),s=n.n(o),i=(n(128),n(34)),l=n(13),r=n(75),d=n(9),j=n(112),b=n.n(j),u=(n(102),n(286)),h=n(264),m=n(289),O=n(291),p=n(294),g=n(290),f=n(292),v=n(293),x=n(295),w=n(296),N=n(2);function k(e){var t=e.block,n=e.isOpen,c=e.onClose,a=(e.handleAdd,e.handleDelete);return n?s.a.createPortal(Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"overlayModal",onClick:c}),Object(N.jsx)("div",{className:"SettingsModal",children:Object(N.jsxs)(u.a,{children:[Object(N.jsxs)(h.a,{button:!0,onClick:function(){a(t.id),c()},children:[Object(N.jsx)(m.a,{children:Object(N.jsx)(g.a,{})}),Object(N.jsx)(O.a,{primary:"Delete"})]}),Object(N.jsxs)(h.a,{button:!0,onClick:c,children:[Object(N.jsx)(m.a,{children:Object(N.jsx)(f.a,{})}),Object(N.jsx)(O.a,{primary:"Duplicate"})]}),Object(N.jsxs)(h.a,{button:!0,onClick:c,children:[Object(N.jsx)(m.a,{children:Object(N.jsx)(v.a,{})}),Object(N.jsx)(O.a,{primary:"Copy link"})]}),Object(N.jsx)(p.a,{}),Object(N.jsxs)(h.a,{button:!0,onClick:c,children:[Object(N.jsx)(m.a,{children:Object(N.jsx)(x.a,{})}),Object(N.jsx)(O.a,{primary:"Comment"})]}),Object(N.jsx)(p.a,{}),Object(N.jsxs)(h.a,{button:!0,onClick:c,children:[Object(N.jsx)(m.a,{children:Object(N.jsx)(w.a,{})}),Object(N.jsx)(O.a,{primary:"Colour"})]})]})})]}),document.getElementById("portal")):null}var C=n(76);function S(e){e.block;var t=e.changeSettingsModal;return Object(N.jsxs)("div",{className:"contentButtons",children:[Object(N.jsx)(C.a,{className:"settingsButton",onClick:t}),Object(N.jsx)(C.b,{className:"optionsButton",onClick:I})]})}function I(){console.log("you have clicked OPTIONS")}n(40),n(236);function F(e){var t=e.block,n=e.updatePage,a=e.handleAdd,o=e.handleDelete,s=Object(c.useState)(!1),i=Object(l.a)(s,2),r=i[0],d=i[1],j=Object(c.useState)(null),u=Object(l.a)(j,2),h=(u[0],u[1]),m=Object(c.useState)(""),O=Object(l.a)(m,2),p=O[0],g=O[1];Object(c.useRef)(t.html);return Object(N.jsxs)("div",{className:"blockContainer",children:[Object(N.jsx)(S,{block:t,changeSettingsModal:function(){d(!0)}}),Object(N.jsx)(b.a,{className:"ReactQuill",value:t.html,onFocus:function(){"<p><br></p>"===t.html?g(!0):g(!1)},onChange:function(e){t.html!==e&&(console.log("onChange called val: ".concat(e)),n(t.id,e))},onKeyDown:function(e){"<p><br></p>"===t.html?g(!0):g(!1),p&&("Backspace"===e.key&&(console.log("readyToDelete+backspace PRESSED"),e.preventDefault(),o(t.id)),"Delete"===e.key&&(console.log("readyToDelete+DELETE PRESSED"),e.preventDefault(),o(t.id)),"/"===e.key&&(console.log("You Pressed /"),e.preventDefault(),d(!0))),h(e.key)},placeholder:"Type '/' for commands",theme:"bubble"}),Object(N.jsx)(k,{block:t,isOpen:r,onClose:function(){d(!1)},handleDelete:o,handleAdd:a})]})}var y=n(117),D=n.n(y),B=n(77),A=n(311),T=[{_id:Object(A.a)(),title:"This is Note One",content:[{id:Object(A.a)(),html:"<p>Block One</p>"},{id:Object(A.a)(),html:"<p>Block Two</p>"},{id:Object(A.a)(),html:"<p>Block Three</p>"}],image:"https://www.notion.so/image/https%3A%2F%2Fwww.docker.com%2Fsites%2Fdefault%2Ffiles%2Fd8%2Fstyles%2Frole_icon%2Fpublic%2F2019-07%2FMoby-logo.png%3Fitok%3DsYH_JEaJ?table=block&id=e46e822a-19c0-4fe7-b026-1dcd793c1f1f&width=250&userId=e646da05-b654-4cdb-b6a2-90edf1444f26&cache=v2"},{_id:Object(A.a)(),title:"Note Object Two",content:[{id:Object(A.a)(),html:"<p>Block 1</p>"},{id:Object(A.a)(),html:"<p>Block 2</p>"}],image:"https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f40a.svg"},{_id:Object(A.a)(),title:"Note Object Three",content:[{id:Object(A.a)(),html:"<p>Block A</p>"}],image:"https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f418.svg"}];function _(){return["https://www.notion.so/image/https%3A%2F%2Fwww.notion.so%2Fimages%2Fpage-cover%2Fmet_frederic_edwin_church_1871.jpg?table=block&id=c8e22ba6-e193-46a4-bd93-bc3abddb535d&width=3070&userId=e646da05-b654-4cdb-b6a2-90edf1444f26&cache=v2","https://www.notion.so/image/https%3A%2F%2Fwww.notion.so%2Fimages%2Fpage-cover%2Fnasa_the_blue_marble.jpg?table=block&id=c8e22ba6-e193-46a4-bd93-bc3abddb535d&width=3070&userId=e646da05-b654-4cdb-b6a2-90edf1444f26&cache=v2","https://www.notion.so/image/https%3A%2F%2Fwww.notion.so%2Fimages%2Fpage-cover%2Fwoodcuts_11.jpg?table=block&id=c8e22ba6-e193-46a4-bd93-bc3abddb535d&width=3070&userId=e646da05-b654-4cdb-b6a2-90edf1444f26&cache=v2","https://www.notion.so/image/https%3A%2F%2Fwww.notion.so%2Fimages%2Fpage-cover%2Fwoodcuts_14.jpg?table=block&id=c8e22ba6-e193-46a4-bd93-bc3abddb535d&width=3070&userId=e646da05-b654-4cdb-b6a2-90edf1444f26&cache=v2","https://www.notion.so/image/https%3A%2F%2Fwww.notion.so%2Fimages%2Fpage-cover%2Fmet_william_morris_1877_willow.jpg?table=block&id=c8e22ba6-e193-46a4-bd93-bc3abddb535d&width=3070&userId=e646da05-b654-4cdb-b6a2-90edf1444f26&cache=v2","https://2.bp.blogspot.com/-C8vnMOJVWRI/XIkaFbYfEcI/AAAAAAAAAgo/FIBvarQjNwwTVb5OPnpRhUjTU1lcnuQMwCKgBGAs/w3840-h1600-p-k-no-nu/anime-scenery-sunset-uhdpaper.com-4K-112.jpg"][Math.floor(6*Math.random())]}var P=n(297);n(310),n(298);function E(e){var t=e.selectedNote,n=e.updateDatabase,a=e.isOpen,o=e.onClose,i=Object(c.useRef)();return a?s.a.createPortal(Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"overlayModal",onClick:o}),Object(N.jsxs)("div",{className:"SettingsModal",children:[Object(N.jsxs)("div",{className:"IconModalNavbar",children:[Object(N.jsx)("h1",{children:"Link"}),Object(N.jsx)(P.a,{onClick:function(){!function(e){e.image=null,n(e)}(t),o()},children:"Remove"})]}),Object(N.jsx)(p.a,{}),Object(N.jsx)("div",{className:"IconModalInput",children:Object(N.jsx)("input",{ref:i,placeholder:"Paste an Image Link",onInput:function(e){i.current=e.target.value}})}),Object(N.jsx)(P.a,{onClick:function(){var e;e=i.current,t.image=e,n(t),o()},children:"Submit"})]})]}),document.getElementById("portal")):null}function M(e){var t=e.selectedNote,n=e.updateDatabase,o=Object(c.useState)(!1),s=Object(l.a)(o,2),i=s[0],r=s[1];return Boolean(t.image)&&Boolean(t.coverImage)?Object(N.jsxs)(a.a.Fragment,{children:[Object(N.jsx)("img",{className:"titleIcon-cover",src:t.image,alt:"",onClick:function(){r(!0)}}),Object(N.jsx)(E,{selectedNote:t,updateDatabase:n,isOpen:i,onClose:function(){r(!1)}})]}):Boolean(t.image)?Object(N.jsxs)(a.a.Fragment,{children:[Object(N.jsx)("img",{className:"titleIcon",src:t.image,alt:"",onClick:function(){r(!0)}}),Object(N.jsx)(E,{selectedNote:t,updateDatabase:n,isOpen:i,onClose:function(){r(!1)}})]}):null}function L(e){var t=e.selectedNote,n=e.updateDatabase,a=Object(c.useRef)(),o=function(e){e.image=["https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f435.svg","https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f98d.svg","https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f98a.svg","https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f42e.svg","https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f416.svg","https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f418.svg","https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f413.svg","https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f422.svg","https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f433.svg","https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f419.svg"][Math.floor(11*Math.random())],n(e)};return Object(N.jsxs)("div",{className:"titleContainer",children:[Object(N.jsx)(M,{selectedNote:t,updateDatabase:n}),Object(N.jsxs)("div",{className:"titleButtons",children:[!Boolean(t.image)&&Object(N.jsxs)("div",{className:"iconButton",onClick:function(){o(t)},children:[Object(N.jsx)(B.b,{className:"react-icon"}),"Add Icon"]}),!Boolean(t.coverImage)&&Object(N.jsxs)("div",{className:"coverButton",onClick:function(){!function(e){e.coverImage=_(),n(e)}(t)},children:[Object(N.jsx)(B.a,{className:"react-icon"}),"Add Cover"]})]}),Object(N.jsx)(D.a,{className:"pageComponentTitle",placeholder:"Page Title Goes Here...",onBlur:function(e){console.log(e.target.textContent),console.log(e.target.innerHTML),t.title=e.target.textContent.trim(),n(t)},html:t.title,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),a.current.el.current.blur())},ref:a})]})}function z(e){var t=e.selectedNote,n=e.updateDatabase;return Boolean(t.coverImage)?Object(N.jsxs)("div",{className:"titleCoverContainer",children:[Object(N.jsx)("img",{className:"titleCoverImage",src:t.coverImage,alt:""}),Object(N.jsxs)("div",{className:"titleCoverButtons",children:[Object(N.jsx)(P.a,{onClick:function(){var e;(e=t).coverImage=null,n(e)},children:"Remove"}),Object(N.jsx)(P.a,{onClick:function(){t.coverImage=_(),n(t)},children:"Change Cover"})]})]}):null}function R(e){var t=e.updateDatabase,n=e.selectedNote,c=function(e,c){var a=n;a.content.find((function(t){return t.id===e})).html=c,t(a)},a=function(){var e=Object(i.a)(n.content),c={id:Object(A.a)(),html:"<p><br></p>"};e.push(c),n.content=e,t(n)},o=function(e){var c=Object(i.a)(n.content).filter((function(t){return t.id!==e}));n.content=c,t(n)};return n?Object(N.jsxs)("div",{className:"Editor",children:[Object(N.jsx)(z,{selectedNote:n,updateDatabase:t}),Object(N.jsxs)("div",{className:"mainContentContainer",children:[Object(N.jsx)(L,{selectedNote:n,updateDatabase:t}),Object(N.jsxs)("div",{className:"contentContainer",children:[n.content.map((function(e){return Object(N.jsx)("div",{children:Object(N.jsx)(F,{block:e,updatePage:c,handleAdd:a,handleDelete:o})},e.id)})),Object(N.jsx)("div",{className:"newBlock",onClick:a,placeholder:"/add new block"})]})]})]}):null}var H=n(299),J=n(300),G=n(301);n(238);function U(e){var t=e.toggle,n=e.isOpen,c=e.logout;return Object(N.jsxs)("div",{className:"Header",children:[Object(N.jsx)("div",{className:"menuOpenBtnHeader",onClick:function(){return t(!0)},children:n?null:Object(N.jsx)(H.a,{})}),Object(N.jsx)("div",{className:"userHeader",children:"test@test.com"}),Object(N.jsx)("div",{className:"shareBtnHeader",children:"Share"}),Object(N.jsxs)("div",{className:"updateBtnHeader",children:[Object(N.jsx)(J.a,{}),"Updates"]}),Object(N.jsx)("div",{className:"settingsBtnHeader",children:Object(N.jsx)(G.a,{})}),Object(N.jsx)("div",{className:"logoutBtnHeader",onClick:c,children:"Logout"})]})}n(103);var K=n(45),W=n(305),Q=n(302),Y=n(303),V=n(304);function q(e){var t,n=e.note,c=e.selectedNote,a=e.setSelectedNote,o=e.deleteNote;return Object(N.jsxs)(h.a,{className:"SidebarItem",selected:c===n,onClick:function(){a(n)},children:[Object(N.jsx)(Q.a,{}),Boolean(n.image)?Object(N.jsx)("img",{className:"sidebarIcon",src:n.image,alt:""}):Object(N.jsx)("div",{className:"sidebarIcon",children:Object(N.jsx)(Y.a,{})}),Object(N.jsx)(O.a,{className:"textSection",primary:(t=n.title,t.length>20?t.substring(0,20)+"...":t)}),Object(N.jsx)(V.a,{className:"SidebarItemSettings",onClick:function(e){!function(e){e.stopPropagation(),o(n._id)}(e)}})]})}function X(e){var t=e.isOpen,n=e.data,c=e.addNote,a=e.deleteNote,o=e.toggle,s=e.selectedNote,i=e.setSelectedNote;return t?Object(N.jsxs)("div",{className:"Sidebar",children:[Object(N.jsxs)("div",{className:"SidebarTop",children:[Object(N.jsx)(K.b,{className:"SiIcons"})," Notion React App",Object(N.jsx)(W.a,{className:"MenuOpenIcon",onClick:function(){return o(!1)}})]}),Object(N.jsx)(p.a,{}),Object(N.jsxs)("div",{className:"NotesSection",children:[Object(N.jsx)("div",{className:"NotesSection-heading",children:"NOTES"}),n&&n.map((function(e){return Object(N.jsx)(q,{note:e,selectedNote:s,setSelectedNote:i,deleteNote:a},e._id)}))]}),Object(N.jsx)(p.a,{}),Object(N.jsx)("div",{className:"newPageBtn",onClick:c,children:Object(N.jsxs)("div",{className:"newPageBtnLabel",children:[Object(N.jsx)(K.a,{className:"SiIcons"})," New page"]})})]}):null}var Z=n(47),$=n.n(Z),ee=n(78),te=n(309),ne=n(306),ce=n(307),ae=n(63),oe=n(308),se=n(118),ie=n(46),le=n.n(ie);function re(e){return de.apply(this,arguments)}function de(){return(de=Object(ee.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("http://localhost:3001/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){var t=e.setToken,n=Object(c.useState)(),a=Object(l.a)(n,2),o=a[0],s=a[1],i=Object(c.useState)(),r=Object(l.a)(i,2),j=r[0],b=r[1],u=function(){var e=Object(ee.a)($.a.mark((function e(n){var c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,re({username:o,password:j});case 3:c=e.sent,t(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=Object(d.f)(),m=function(e){le.a.post("http://localhost:3001/login",{tokenId:e.tokenId}).then((function(e){"success"===e.data&&h.push("/")})).catch((function(e){console.error(e)}))};function O(){}var g=be();return Object(N.jsx)("div",{className:g.container,children:Object(N.jsx)(ne.a,{className:g.card,children:Object(N.jsxs)(ce.a,{children:[Object(N.jsxs)(ae.a,{className:g.title,color:"textSecondary",gutterBottom:!0,children:[Object(N.jsx)(K.b,{className:"SiIcons"})," Notion React App"]}),Object(N.jsx)(ae.a,{variant:"h5",component:"h2",children:"LOGIN"}),Object(N.jsx)(p.a,{}),Object(N.jsx)("div",{className:g.loginWrapper,children:Object(N.jsxs)("form",{onSubmit:u,children:[Object(N.jsxs)("label",{children:[Object(N.jsx)("p",{children:"Username"}),Object(N.jsx)("input",{type:"text",placeholder:"Email",onChange:function(e){return s(e.target.value)}})]}),Object(N.jsxs)("label",{children:[Object(N.jsx)("p",{children:"Password"}),Object(N.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){return b(e.target.value)}})]}),Object(N.jsx)("div",{children:Object(N.jsx)("button",{type:"submit",children:"Submit"})})]})}),Object(N.jsx)(se.GoogleLogin,{clientId:"436581585233-tfe7t63pqblerrrn0ua9n7j9hjfv3bki.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:m,onFailure:m,cookiePolicy:"single_host_origin"}),Object(N.jsxs)(oe.a,{children:[Object(N.jsx)(P.a,{onClick:function(){le.a.get("http://localhost:3001/auth/google").then((function(e,t){console.log(t)})).catch((function(e){console.error(e)}))},children:"Google Login"}),Object(N.jsx)(P.a,{onClick:O,children:"Sign-out"})]})]})})})}var be=Object(te.a)({container:{display:"flex",flexDirection:"column",justifyContent:"space-evenly"},card:{margin:100,minWidth:400,alignSelf:"center"},loginWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},title:{fontSize:14},pos:{marginBottom:12}}),ue=(n(259),le.a.create({baseURL:"http://localhost:3001/notes/"}));function he(){var e=Object(c.useState)((function(){var e=sessionStorage.getItem("token"),t=JSON.parse(e);return null===t||void 0===t?void 0:t.token})),t=Object(l.a)(e,2),n=t[0],a=t[1];return{setToken:function(e){sessionStorage.setItem("token",JSON.stringify(e)),a(e.token)},token:n}}var me=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(),s=Object(l.a)(o,2),j=s[0],b=s[1],u=Object(c.useState)(!0),h=Object(l.a)(u,2),m=h[0],O=h[1];console.log("Custom Hook:",he());var p=he(),g=(p.token,p.setToken);return Object(c.useEffect)((function(){ue.get().then((function(e){return e.data})).then((function(e){a(e)})).catch((function(e){console.log("Unable to connect to DB... Did you run MongoDB Server?"),a(T),console.error("GETALL API: ".concat(e))}))}),[]),Object(N.jsx)(r.a,{basename:"/note-project",children:Object(N.jsxs)(d.c,{children:[Object(N.jsx)(d.a,{exact:!0,path:"/login",children:Object(N.jsx)(je,{setToken:g,logout:function(){}})}),Object(N.jsx)(d.a,{exact:!0,path:"/",children:Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)(X,{data:n,toggle:O,isOpen:m,selectedNote:j,setSelectedNote:b,addNote:function(){var e,t={title:"",content:[]},c=Object(i.a)(n);(e=t,ue.post("",e).then((function(e){return e.data})).catch((function(e){console.error("ADD API: ".concat(e))}))).then((function(e){e?(c.push(e),a(c),b(e)):(console.log("no response"),t._id=Object(A.a)(),c.push(t),a(c),b(t))}))},deleteNote:function(e){!function(e){ue.delete("".concat(e)).then((function(e){return e.data})).catch((function(e){console.error("DELETE API: ".concat(e))}))}(e);var t=n.filter((function(t){return t._id!==e}));a(t),b(n[0])}}),Object(N.jsx)(U,{toggle:O,isOpen:m}),Object(N.jsx)(R,{updateDatabase:function(e){var t=Object(i.a)(n),c=t.indexOf(e);t[c]=e,a(t),function(e,t){ue.patch("".concat(e),t).then((function(e){return e.data})).catch((function(e){console.error("UPDATE API: ".concat(e))}))}(e._id,e)},selectedNote:j})]})})]})})};s.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(me,{})}),document.getElementById("root"))},40:function(e,t,n){}},[[260,1,2]]]);
//# sourceMappingURL=main.3983a7aa.chunk.js.map